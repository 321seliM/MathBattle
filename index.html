<!DOCTYPE html>
<html>
    <head>
        <title>Math Battle</title>
        <style>
            body {
                text-align: center;
                font-family: Arial, Helvetica, sans-serif;
                border: 8px;
            }
            button {
                margin: 10px;
                width: 75px;
                height: 45px;
            }
            .text {
                resize: none;
                margin-left: 31px;
                margin-right: 22px;
                margin-bottom: 11px;
                height: 36px;
                width: 96px;
            }
            
        </style>
    </head>
    <body id="body">
        <div id="start" style="display: block;">  
        <button id="startButton">Click to start!</button>
        <label>operation:</label>
        <select id="operation">
            <optgroup label="Basic Operations">
                <option value="0">Addition</option>
                <option value="2">Subtraction</option>
                <option value="3">Multiplication</option>
                <option value="4">Division</option>
            </optgroup>
            <optgroup label="Advanced Operations">
                <option value="1">Subtraction w/ Negatives</option>
                <option value="5">Floor Division</option>
                <option value="6">Remainder (Mod)</option>
            </optgroup>
        </select>
        <br>
        <input class="text" id="min1" placeholder="Minimum" rows="2" cols="10" type="number"></input>
        <input class="text" id="max1" placeholder="Maximum" rows="2" cols="10" type="number"></input>
        <br>
        <input class="text" id="min2" placeholder="Advanced" rows="2" cols="10" type="number"></input>
        <input class="text" id="max2" placeholder="Advanced" rows="2" cols="10" type="number"></input>
        </div>
        <div id="main" style="display: none;">
            <h1 id="question">hello</h1>
            <input id="answer" class="text" type="number" placeholder="answer"></input>
            <button id="submitButton">Submit</button> 
        </div>
        <div id="correct" style="display: none;">
            <h1>Correct!✅ </h1>
            <button id="continueButton">Continue</button>
        
        </div>
        <div id="incorrect" style="display: none;">
            <h1>Incorrect!❌</h1>
            <h3>Score: <span id="score">0</span></h3>
            <button id="restartButton">Restart</button>
        </div>
    </body>
    <script>

    const MathOperations = Object.freeze({
        ADD: 0,
        SUBTRACT_NEG: 1,
        SUBTRACT: 2,
        MULTIPLY: 3,
        DIVIDE: 4,
        DIVIDE_FLOOR: 5,
        REMAINDER: 6,
    });

        var d = document
        var scorement = d.getElementById("score")
        var score = 0
        var startButton = d.getElementById("startButton");
        var submitButton = d.getElementById("submitButton")
        var randNum = function(min,max) {
            return Math.floor((Math.random() * (max - min)) + min)
        }
        var output = d.getElementById("question");
        var startPage = d.getElementById("start");
        var mainPage = d.getElementById("main")
        var correctPage = d.getElementById("correct")
        var incorrectPage = d.getElementById("incorrect")
        var continueButton = d.getElementById("continueButton")
        var restartButton = d.getElementById("restartButton")
        var onStart = function() {
        score = 0
        var textMin1 = d.getElementById("min1");
        window.Min1 = parseFloat(textMin1.value);
        var textMax1 = d.getElementById("max1");
        window.Max1 = parseFloat(textMax1.value);
        var textMin2 = d.getElementById("min2");
        window.Min2 = parseFloat(textMin2.value);
        var textMax2 = d.getElementById("max2");
        window.Max2 = parseFloat(textMax2.value);
        if (isNaN(window.Min2) && isNaN(window.Max2)) {
            window.Min2 = window.Min1
            window.Max2 = window.Max1
        }
        var operationSelector = d.getElementById("operation");
        window.questionInfo = {
            operation: operationSelector.value,
            num1: randNum(Min1,Max1),
            num2: randNum(Min2,Max2),
            calcValue: function() {
                
                if (parseFloat(this.operation) === MathOperations.ADD) {
                    return this.num1 + this.num2;
                } else if (parseFloat(this.operation) === MathOperations.SUBTRACT_NEG) {
                    return this.num1 - this.num2;
                } else if (parseFloat(this.operation) === MathOperations.SUBTRACT) {
                    return this.num1 - this.num2
                } else if (parseFloat(this.operation) === MathOperations.MULTIPLY) {
                    return this.num1 * this.num2;
                } else if (parseFloat(this.operation) === MathOperations.DIVIDE) {
                    return this.num1 / this.num2;
                } else if (parseFloat(this.operation) === MathOperations.DIVIDE_FLOOR) {
                    return Math.floor(this.num1 / this.num2)
                } else if (parseFloat(this.operation) === MathOperations.REMAINDER) {
                    return this.num1 % this.num2
                }
                    
            },
            calcEquation: function() {
                if (isNaN(this.num1)) {return "ERROR 101"}
                if (isNaN(this.num2)) {return "ERROR 101"}
                if (parseFloat(this.operation) === MathOperations.ADD) {
                    return this.num1.toString() + " + " + this.num2.toString();
                } else if (parseFloat(this.operation) === MathOperations.SUBTRACT_NEG) {
                    return this.num1.toString() + " - " + this.num2.toString();
                } else if (parseFloat(this.operation) === MathOperations.SUBTRACT) {
                    while (true) {
                        if (this.num1 - this.num2 > 0) {
                            return this.num1 + " - " + this.num2
                        } else {
                            this.num1 = randNum(Min,Max)
                            this.num2 = randNum(Min,Max)
                        }
                    }
                } else if (parseFloat(this.operation) === MathOperations.MULTIPLY) {
                    return this.num1.toString() + " x " + this.num2.toString();
                } else if (parseFloat(this.operation) === MathOperations.DIVIDE) {
                    while (true) {
                        if ((this.num1 / this.num2) % 1 === 0) {
                            return this.num1 + "÷" + this.num2
                        } else {
                            this.num1 = randNum(Min,Max)
                            this.num2 = randNum(Min,Max)
                        }
                    }
                    
                } else if (parseFloat(this.operation) === MathOperations.DIVIDE_FLOOR) {
                    return this.num1 + "÷" + this.num2
                } else if (parseFloat(this.operation) === MathOperations.REMAINDER) {
                    return this.num1 + "%" + this.num2
                }
                
            }
                
        };
            output.textContent = questionInfo.calcEquation()
            mainPage.style.display = "block";
            startPage.style.display = "none";
            correctPage.style.display = "none";
            
        };
        var answer = d.getElementById("answer")
        var onSubmit = function() {
            
            if (parseFloat(answer.value) === questionInfo.calcValue()) {
                mainPage.style.display = "none"
                correctPage.style.display = "block";
            } else {
                mainPage.style.display = "none"
                incorrectPage.style.display = "block";
            };
        };
        var onContinue = function() {
            score++
            scorement.innerText = score
            questionInfo.num1 = randNum(Min1,Max1);
            questionInfo.num2 = randNum(Min2,Max2);
            output.textContent = questionInfo.calcEquation();
            answer.value = "";
            mainPage.style.display = "block"
            correctPage.style.display = "none";
        };
        var onRestart = function() {
            answer.value = "";
            incorrectPage.style.display = "none"
            startPage.style.display = "block"
        }
        startButton.addEventListener("click",onStart);
        submitButton.addEventListener("click",onSubmit);
        continueButton.addEventListener("click",onContinue);
        restartButton.addEventListener("click",onRestart)    
    </script>
</html>
